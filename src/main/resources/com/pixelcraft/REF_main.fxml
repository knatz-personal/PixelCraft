<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.scene.canvas.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.collections.*?>
<?import javafx.geometry.*?>

<BorderPane xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.pixelcraft.MainController" prefWidth="1200.0" prefHeight="800.0">
  <!-- Top: Menu + Toolbar -->
  <top>
    <VBox>
      <MenuBar>
        <menus>
          <Menu text="File">
            <items>
              <MenuItem text="New" onAction="#onNew"/>
              <MenuItem text="Open..." onAction="#onOpen"/>
              <MenuItem text="Save" onAction="#onSave"/>
              <MenuItem text="Save As" onAction="#onSaveAs"/>
              <SeparatorMenuItem/>
              <MenuItem text="Recents" onAction="#onRecents"/>
              <SeparatorMenuItem/>
              <MenuItem text="Exit" onAction="#onExit"/>
            </items>
          </Menu>
          <Menu text="Edit">
            <items>
              <MenuItem text="Undo" onAction="#onGenericClick"/>
              <MenuItem text="Redo" onAction="#onGenericClick"/>
              <MenuItem text="Cut" onAction="#onGenericClick"/>
              <MenuItem text="Copy" onAction="#onGenericClick"/>
              <MenuItem text="Paste" onAction="#onGenericClick"/>
              <MenuItem text="Select All" onAction="#onGenericClick"/>
            </items>
          </Menu>
          <Menu text="View">
            <items>
              <MenuItem text="Zoom In +" onAction="#onGenericClick"/>
              <MenuItem text="Zoom Out -" onAction="#onGenericClick"/>
              <MenuItem text="Fit" onAction="#onGenericClick"/>
              <MenuItem text="100%" onAction="#onGenericClick"/>
              <MenuItem text="Rulers" onAction="#onGenericClick"/>
            </items>
          </Menu>
          <Menu text="Image">
            <items>
              <MenuItem text="Rotate" onAction="#onGenericClick"/>
              <MenuItem text="Flip" onAction="#onGenericClick"/>
              <MenuItem text="Crop" onAction="#onGenericClick"/>
              <MenuItem text="Resize" onAction="#onGenericClick"/>
              <MenuItem text="Skew" onAction="#onGenericClick"/>
            </items>
          </Menu>
          <Menu text="Filters">
            <items>
              <MenuItem text="Blur" onAction="#onGenericClick"/>
              <MenuItem text="Sharpen" onAction="#onGenericClick"/>
              <MenuItem text="Edge Detect" onAction="#onGenericClick"/>
              <MenuItem text="GrayScale" onAction="#onGenericClick"/>
              <MenuItem text="Sepia" onAction="#onGenericClick"/>
            </items>
          </Menu>
          <Menu text="Help">
            <items>
              <MenuItem text="About" onAction="#onAbout"/>
            </items>
          </Menu>
        </menus>
      </MenuBar>
      <ToolBar>
        <!-- Left group: file/tool icons -->
        <HBox spacing="6.0">
          <Button text="â‰¡"/>
          <Button text="ðŸ“"/>
          <Button text="ðŸ’¾"/>
          <Button text="â†¶"/>
          <Button text="â†·"/>
        </HBox>
        <Separator orientation="VERTICAL"/>
        <HBox spacing="6.0">
          <ToggleButton text="âœï¸"/>
          <ToggleButton text="ðŸ§¹"/>
          <ToggleButton text="ðŸŽ¨"/>
          <ToggleButton text="ðŸª£"/>
          <ToggleButton text="ðŸ“"/>
          <ToggleButton text="â¬œ"/>
          <ToggleButton text="â­•"/>
          <ToggleButton text="ðŸ”·"/>
          <ToggleButton text="ðŸ”¨"/>
        </HBox>
        <Region HBox.hgrow="ALWAYS"/>
        <HBox spacing="8.0" alignment="CENTER_RIGHT">
          <Label text="B C S H"/>
          <Separator orientation="VERTICAL"/>
          <Button text="ðŸ”+"/>
          <Button text="ðŸ”-"/>
          <Label text="100%"/>
          <Button text="Fit"/>
        </HBox>
      </ToolBar>
    </VBox>
  </top>

  <!-- Center: main workspace with left toolbox and right layers/history -->
  <center>
    <SplitPane dividerPositions="0.18,0.82">
      <!-- Left: Toolbox -->
      <VBox prefWidth="180.0" spacing="8.0">
        <padding>
          <Insets top="8.0" right="8.0" bottom="8.0" left="8.0"/>
        </padding>
        <Label text="TOOLBOX" style="-fx-font-weight: bold;"/>
        <VBox spacing="4.0">
          <ToggleButton text="âœï¸ Pencil"/>
          <ToggleButton text="ðŸ§¹ Eraser"/>
          <ToggleButton text="ðŸŽ¨ Picker"/>
          <ToggleButton text="ðŸª£ Fill"/>
          <ToggleButton text="ðŸ“ Line"/>
          <ToggleButton text="â¬œ Rect"/>
          <ToggleButton text="â­• Ellipse"/>
          <ToggleButton text="ðŸ”· Select"/>
          <ToggleButton text="ðŸ”¨ Clone"/>
        </VBox>
        <Separator/>
        <Label text="Size:"/>
        <HBox spacing="6.0">
          <Slider min="1" max="100" value="12"/>
          <Label text="12 px"/>
        </HBox>
        <Label text="Opacity:"/>
        <HBox spacing="6.0">
          <Slider min="0" max="100" value="100"/>
          <Label text="100%"/>
        </HBox>
        <Separator/>
        <Label text="Foreground/Background"/>
        <HBox spacing="8.0">
          <Rectangle width="24" height="24" style="-fx-fill: black; -fx-stroke: gray;"/>
          <Rectangle width="24" height="24" style="-fx-fill: white; -fx-stroke: gray;"/>
          <Button text="Swap â†”"/>
        </HBox>
        <Separator/>
        <Label text="Recent Colors:"/>
        <GridPane hgap="4" vgap="4">
          <!-- placeholders for color swatches -->
          <Rectangle GridPane.columnIndex="0" GridPane.rowIndex="0" width="18" height="18" style="-fx-fill: #000000; -fx-stroke: gray;"/>
          <Rectangle GridPane.columnIndex="1" GridPane.rowIndex="0" width="18" height="18" style="-fx-fill: #777777; -fx-stroke: gray;"/>
          <Rectangle GridPane.columnIndex="2" GridPane.rowIndex="0" width="18" height="18" style="-fx-fill: #ffffff; -fx-stroke: gray;"/>
        </GridPane>
      </VBox>
      <!-- Center: Canvas area inside a ScrollPane -->
      <StackPane>
        <ScrollPane fitToWidth="true" fitToHeight="true">
          <content>
            <Pane fx:id="canvasPane" prefWidth="800.0" prefHeight="600.0" style="-fx-background-color: #ddd; -fx-border-color: #bbb;">
              <!-- A Canvas node will be created/managed by the controller at runtime -->
            </Pane>
          </content>
        </ScrollPane>
      </StackPane>
      <!-- Right: Layers / History -->
      <VBox prefWidth="220.0" spacing="8.0">
        <padding>
          <Insets top="8.0" right="8.0" bottom="8.0" left="8.0"/>
        </padding>
        <Label text="LAYERS / HISTORY" style="-fx-font-weight: bold;"/>
        <TitledPane text="Layers" expanded="true">
          <content>
            <ListView fx:id="layersListView" prefHeight="180.0">
              <items>
                <FXCollections fx:factory="observableArrayList">
                  <String fx:value="Layer 1"/>
                  <String fx:value="Layer 0"/>
                </FXCollections>
              </items>
            </ListView>
          </content>
        </TitledPane>
        <TitledPane text="History" expanded="true">
          <content>
            <ListView fx:id="historyListView" prefHeight="180.0"/>
          </content>
        </TitledPane>
      </VBox>
    </SplitPane>
  </center>

  <!-- Bottom: status bar -->
  <bottom>
    <HBox spacing="12.0" alignment="CENTER_LEFT">
      <padding>
        <Insets top="6.0" right="6.0" bottom="6.0" left="6.0"/>
      </padding>
      <Label text="Image: 800Ã—600 RGB"/>
      <Separator orientation="VERTICAL"/>
      <Label text="Zoom: 100%"/>
      <Separator orientation="VERTICAL"/>
      <Label text="Pos: (245, 156)"/>
      <Separator orientation="VERTICAL"/>
      <Label text="Mode: Drawing"/>
    </HBox>
  </bottom>
</BorderPane>
